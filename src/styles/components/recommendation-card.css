/* =========================
   Recommendation Card (3D print)
   ========================= */

.rec-card {
  padding: 0;
  perspective: 1200px;
}

/* Enter animation */

.rec-card--enter {
  opacity: 0;
  transform: perspective(900px) rotateY(-90deg) translateY(10px) scale(0.98);
  animation: flipIn 800ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  will-change: transform, opacity;
}

@keyframes flipIn {
  0% {
    opacity: 0;
    transform: perspective(900px) rotateY(-90deg) translateY(10px) scale(0.98);
  }
  60% {
    opacity: 1;
    transform: perspective(900px) rotateY(10deg) translateY(0) scale(1);
  }
  100% {
    opacity: 1;
    transform: perspective(900px) rotateY(0deg) translateY(0) scale(1);
  }
}

/* Outer wrapper */

.rec-card-outer {
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;
  overflow: visible;


  --depth: 9px;

  transition: transform 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
  transform-origin: bottom right;
}

.rec-card:hover .rec-card-outer {
  --depth: 18px;
  transform: translate(-6px, -8px);
}

/* Front face  */

.rec-card-inner {
  position: relative;
  z-index: 3;

  width: 100%;
  height: 100%;

  background: var(--surface);
  border: 2px solid var(--ink);
  border-radius: var(--radius);
  overflow: hidden;

  will-change: transform;
}

/* 3D RIGHT face */

.rec-3d-right {
  position: absolute;
  top: 0;
  left: 100%;

  width: var(--depth);
  height: 98%;
  margin-top: 2%;

  z-index: 2;
  pointer-events: none;

  background: color-mix(in srgb, var(--indigo) 75%, transparent);

  transform: skewY(45deg);
  transform-origin: top left;

  transition:
    width 220ms cubic-bezier(0.2, 0.8, 0.2, 1),
    height 220ms cubic-bezier(0.2, 0.8, 0.2, 1),
    margin-top 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

.rec-3d-right::after {
  content: "";
  position: absolute;
  inset: 0;
  border-right: 2px solid var(--ink);
}

/* 3D BOTTOM face */

.rec-3d-bottom {
  position: absolute;
  top: 100%;
  left: 0;

  width: 98%;
  margin-left: 2%;
  height: var(--depth);

  z-index: 1;
  pointer-events: none;

  background: var(--navy-light);

  transform: skewX(45deg);
  transform-origin: top left;

  transition:
    height 220ms cubic-bezier(0.2, 0.8, 0.2, 1),
    width 220ms cubic-bezier(0.2, 0.8, 0.2, 1),
    margin-left 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

.rec-3d-bottom::after {
  content: "";
  position: absolute;
  inset: 0;
  border-bottom: 2px solid var(--ink);
}

/* Corner fill  */

.rec-card-outer::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;

  background: var(--navy-light);
  border-radius: var(--radius);

  transform: translate(var(--depth), var(--depth));
  transform-origin: bottom right;

  transition: transform 220ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* Poster + image  */

.rec-poster {
  position: relative;
  width: 100%;
  height: 100%;
}

.rec-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.rec-img--fallback {
  background: rgba(252, 252, 253, 0.06);
}

/* Title overlay  */

.rec-title-overlay {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 12px 14px;

  background: rgba(115, 115, 255, 0.8);
}

.rec-title {
  margin: 0;
  font-size: 1rem;
  line-height: 1.3;
  font-weight: 600;
  color: #fcfcfd;

  overflow-wrap: break-word;
  word-break: break-word;

  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Reduced motion*/

@media (prefers-reduced-motion: reduce) {
  .rec-card--enter {
    animation: none;
    opacity: 1;
    transform: none;
  }

  .rec-card-outer {
    transition: none;
    transform: none;
  }

  .rec-3d-right,
  .rec-3d-bottom,
  .rec-card-outer::after {
    transition: none;
  }
}


.rec-card {
  cursor: pointer;
}

.rec-3d-right,
.rec-3d-bottom,
.rec-title-overlay {
  pointer-events: none;
}